# Анализ тональности сообщений (Sentiment Analysis API)

API для анализа эмоциональной окраски текста с аутентификацией пользователей.

## Функционал

- Регистрация и аутентификация пользователей (JWT) .в том числе выход из аккаунта
- Пополнение счета
- Выполнение анализа с помощью моделей трех разных стоимостей: деешвой, средней и дорогой
- Хранение данных в БД (SQLAlchemy, Postgres)

## Настройка проекта

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл .env в корне проекта:
```env
OPENAI_API_KEY=your_openai_key  # Ключ OpenAI API
SECRET_KEY=your_secret_key      # Секретный ключ для подписи JWT
DATABASE_URL=sqlite:///./test.db # URL подключения к БД
```

3. Запустите приложение
```
uvicorn main:app --reload
```

## Эндпоинты API
POST /register - регистрация нового пользователя
POST /login - вход в аккаунт
POST /add_money - пополнение счета на 50 кредитов
POST /predict - выполнение предсказания
GET /prediction_history - получить историю предсказаний

## Архитектура проекта
```
project/
├── config/            # Настройки приложения
│   ├── settings.py
├── core/              # Ядро приложения
│   ├── entities/      # Сущности данных
│   ├── use_cases/     # Бизнес-логика
│   └── repositories/  # Репозитории данных
├── frontend/          # Фронтенд приложения
│   ├── app.js
│   └── index.html
├── infra/             # Инфраструктура
│   ├── db/            # Работа с базой данных
│   └── web/           # Контроллеры данных
└──
```

## Стек
Зависимости
* FastAPI - веб-фреймворк
* SQLAlchemy - ORM для работы с БД
* NLTK - анализ тональности текста
* OpenAI - интеграция с ИИ-моделями
* Pydantic - валидация данных
* Passlib - хэширование паролей